"use strict";(self.webpackChunkintelehealth_ui=self.webpackChunkintelehealth_ui||[]).push([[753],{7137:(Gt,N,s)=>{s.r(N),s.d(N,{HttpLoaderFactory:()=>Et,RosterModule:()=>Qt});var Q=s(7761),g=s(1149),I=s(9824),G=s(1279),v=s(1223),O=s(6766),l=s(4006),C=s(1377),R=s(4476),y=s(6895),H=s(9832),f=s(8341),u=s(5439),t=s(4650),x=s(443),w=s(7185),D=s(9722),_=s(6201),Y=s(3482);function V(n,i){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function $(n,i){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function L(n,i){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function W(n,i){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function j(n,i){if(1&n&&(t.TgZ(0,"div")(1,"mat-checkbox",19),t._uU(2),t.qZA()()),2&n){const e=i.$implicit,o=i.index;t.xp6(1),t.Q6J("formControlName",o),t.xp6(1),t.Oqu(e)}}let z=(()=>{class n{constructor(e,o,a,r){this.fb=e,this.data=o,this.rosterService=a,this.toastrService=r,this.daysChecklist=this.rosterService.days,this.departments=this.rosterService.departments,this.doctors=this.rosterService.doctors,this.weeks=this.rosterService.weeks,this.months=this.rosterService.months,this.scheduledDates=[],this.selectAll=!1}ngOnInit(){this.form=this.fb.group({days:this.fb.array(this.daysChecklist.map(()=>!1)),startTime:["",l.kI.required],endTime:["",l.kI.required],department:["",l.kI.required],doctor:["",l.kI.required],month:["",l.kI.required],week:["",l.kI.required],sameForUpcomingWeeks:[!1]})}toggleAllDays(e){this.selectAll=e;const o=this.daysArray;o.patchValue(o.controls.map(()=>e))}get daysArray(){return this.form.get("days")}onDepartmentChange(e){this.doctors=this.rosterService.filterDoctorListByDepartment(e)}getDateFromDay(e,o,a){console.log(e,o,a);let r=u([e,o]),c=r.day(),T=(0===c?1:7-c+1)+7*(a+(0===c?0:-1)),b=[];for(let d=0;d<7;d++){let m=u([e,o,T+d]);m.month()===r.month()&&b.push({date:m.format("YYYY-MM-DD"),day:m.format("dddd")})}return console.log(b),b}submitForm(){if(this.form.valid){this.scheduledDates=[];const e=this.form.value.days.map((d,m)=>d?this.daysChecklist[m]:null).filter(d=>null!==d);console.log(e,this.form.value.days);const{startTime:o,endTime:a,department:r,doctor:c,month:h,week:p,sameForUpcomingWeeks:T}=this.form.value,b=this.months.indexOf(h);if(console.log(o,a,r,c,h,p,T,b),T)for(let d=this.weeks.indexOf(p);d<5;d++){const m=this.getDateFromDay(u().year(),b,d);e.forEach(A=>{const k=m.find(It=>It.day===A);k&&this.scheduledDates.push({date:k.date,startTime:u(o,"HH:mm").format("hh:mm A"),endTime:u(a,"HH:mm").format("hh:mm A"),doctorName:c.name,department:r,doctorProviderUuid:c.doctorProviderUuid})})}else{console.log(c,"doctor");const d=this.getDateFromDay(u().year(),b,this.weeks.indexOf(p));e.forEach(m=>{const A=d.find(k=>k.day===m);A&&this.scheduledDates.push({date:A.date,startTime:u(o,"HH:mm").format("hh:mm A"),endTime:u(a,"HH:mm").format("hh:mm A"),doctorName:c.name,department:r,doctorProviderUuid:c.doctorProviderUuid})})}console.log(this.scheduledDates),this.rosterService.createRoster(this.scheduledDates).subscribe({next:d=>{console.log(d),this.toastrService.success("Success","New data added"),this.data.getRostersByMonthAndYear()},error:d=>{console.error("Error fetching rosters:",d)}})}else console.log("Form is invalid")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(f.WI),t.Y36(x.s),t.Y36(w._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-new-schedule-dialog"]],decls:46,vars:8,consts:[[1,"form-grid",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","department",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","doctor"],["formControlName","month"],["formControlName","week"],[1,"days-column"],["formArrayName","days"],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"time-column"],["matInput","","formControlName","startTime","type","time"],["appearance","outline",2,"margin-left","17px"],["matInput","","formControlName","endTime","type","time"],["formControlName","sameForUpcomingWeeks"],[1,"submit-button"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],[3,"formControlName"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Add roster"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Department"),t.qZA(),t.TgZ(7,"mat-select",2),t.NdJ("selectionChange",function(r){return o.onDepartmentChange(r.value)}),t.YNc(8,V,2,2,"mat-option",3),t.qZA()(),t.TgZ(9,"mat-form-field",1)(10,"mat-label"),t._uU(11,"Doctor"),t.qZA(),t.TgZ(12,"mat-select",4),t.YNc(13,$,2,2,"mat-option",3),t.qZA()(),t.TgZ(14,"mat-form-field",1)(15,"mat-label"),t._uU(16,"Month"),t.qZA(),t.TgZ(17,"mat-select",5),t.YNc(18,L,2,2,"mat-option",3),t.qZA()(),t.TgZ(19,"mat-form-field",1)(20,"mat-label"),t._uU(21,"Week"),t.qZA(),t.TgZ(22,"mat-select",6),t.YNc(23,W,2,2,"mat-option",3),t.qZA()(),t.TgZ(24,"div",7)(25,"label"),t._uU(26,"Days:"),t.qZA(),t.TgZ(27,"div",8)(28,"mat-checkbox",9),t.NdJ("change",function(r){return o.toggleAllDays(r.checked)}),t._uU(29,"All"),t.qZA(),t.YNc(30,j,3,2,"div",10),t.qZA()(),t.TgZ(31,"div",11)(32,"mat-form-field",1)(33,"mat-label"),t._uU(34,"Start Time"),t.qZA(),t._UZ(35,"input",12),t.qZA(),t.TgZ(36,"mat-form-field",13)(37,"mat-label"),t._uU(38,"End Time"),t.qZA(),t._UZ(39,"input",14),t.qZA(),t._UZ(40,"br"),t.TgZ(41,"mat-checkbox",15),t._uU(42,"Same for upcoming weeks"),t.qZA()(),t.TgZ(43,"div",16)(44,"button",17),t._uU(45," Submit "),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngForOf",o.departments),t.xp6(5),t.Q6J("ngForOf",o.doctors),t.xp6(5),t.Q6J("ngForOf",o.months),t.xp6(5),t.Q6J("ngForOf",o.weeks),t.xp6(5),t.Q6J("checked",o.selectAll),t.xp6(2),t.Q6J("ngForOf",o.daysChecklist),t.xp6(14),t.Q6J("disabled",!o.form.valid))},dependencies:[v.KE,v.hX,D.gD,_.ey,Y.oG,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.CE,y.sg,O.Nt,C.lW],styles:[".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}.days-column[_ngcontent-%COMP%], .time-column[_ngcontent-%COMP%]{grid-column:span 2}.submit-button[_ngcontent-%COMP%]{grid-column:span 4;text-align:right;margin-top:20px}"]}),n})();var Z=s(7021);function X(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function K(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(1),t.Oqu(e.name)}}let tt=(()=>{class n{constructor(e,o,a,r){this.fb=e,this.data=o,this.rosterService=a,this.toastrService=r,this.daysChecklist=this.rosterService.days,this.departments=this.rosterService.departments,this.doctors=this.rosterService.doctors,this.months=this.rosterService.months,this.scheduledDates=[]}ngOnInit(){console.log(this.data),this.form=this.fb.group({department:[this.data.department,l.kI.required],doctorName:[this.data.doctorName,l.kI.required],doctorProviderUuid:[this.data.doctorProviderUuid,l.kI.required],date:[new Date(this.data.date),l.kI.required],startTime:[u(this.data.startTime,"HH:mm").format("HH:mm"),l.kI.required],endTime:[u(this.data.endTime,"HH:mm").format("HH:mm"),l.kI.required]}),this.doctors=this.rosterService.filterDoctorListByDepartment(this.data.department),console.log(this.doctors,"this.doctors")}onDepartmentChange(e){this.doctors=this.rosterService.filterDoctorListByDepartment(e)}submitForm(){if(this.form.valid){console.log(this.form.value,"this.form.value");const{department:e,doctorProviderUuid:o,doctorName:a,date:r,startTime:c,endTime:h}=this.form.value,p=u(r).format("YYYY-MM-DD"),T=u(c,"HH:mm").format("hh:mm A"),b=u(h,"HH:mm").format("hh:mm A");this.rosterService.updateRosterById(this.data.id,{department:e,doctorName:a,date:p,startTime:T,endTime:b,doctorProviderUuid:o}).subscribe({next:m=>{this.toastrService.success("Success","Schedule updated"),this.data.getRostersByMonthAndYear()},error:m=>{console.error("Error updating roster:",m)}})}else console.log("Form is invalid")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(f.WI),t.Y36(x.s),t.Y36(w._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["edit-schedule-dialog"]],decls:38,vars:6,consts:[[1,"form-grid",3,"formGroup","ngSubmit"],[1,"grid-container"],[1,"grid-item"],["appearance","outline",1,"w-100"],["formControlName","department",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","doctorName"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","startTime","type","time"],["matInput","","formControlName","endTime","type","time"],[1,"submit-button"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Edit roster"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(4,"div",1)(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),t._uU(8,"Department"),t.qZA(),t.TgZ(9,"mat-select",4),t.NdJ("selectionChange",function(r){return o.onDepartmentChange(r.value)}),t.YNc(10,X,2,2,"mat-option",5),t.qZA()()(),t.TgZ(11,"div",2)(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Doctor"),t.qZA(),t.TgZ(15,"mat-select",6),t.YNc(16,K,2,2,"mat-option",5),t.qZA()()(),t.TgZ(17,"div",2)(18,"mat-form-field",3)(19,"mat-label"),t._uU(20,"Date"),t.qZA(),t._UZ(21,"input",7)(22,"mat-datepicker-toggle",8)(23,"mat-datepicker",null,9),t.qZA()(),t.TgZ(25,"div",2)(26,"mat-form-field",3)(27,"mat-label"),t._uU(28,"Start Time"),t.qZA(),t._UZ(29,"input",10),t.qZA()(),t.TgZ(30,"div",2)(31,"mat-form-field",3)(32,"mat-label"),t._uU(33,"End Time"),t.qZA(),t._UZ(34,"input",11),t.qZA()()(),t.TgZ(35,"div",12)(36,"button",13),t._uU(37," Update "),t.qZA()()()()),2&e){const a=t.MAs(24);t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngForOf",o.departments),t.xp6(6),t.Q6J("ngForOf",o.doctors),t.xp6(5),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(14),t.Q6J("disabled",!o.form.valid)}},dependencies:[v.KE,v.hX,v.R9,D.gD,_.ey,Z.Mq,Z.hl,Z.nW,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,y.sg,O.Nt,C.lW],styles:[".form-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px}.grid-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.submit-button[_ngcontent-%COMP%]{grid-column:span 4;text-align:right;margin-top:20px}"]}),n})(),et=(()=>{class n{constructor(e,o,a,r){this.dialogRef=e,this.data=o,this.rosterService=a,this.toastrService=r}onNoClick(){this.dialogRef.close(!1)}onConfirm(){this.rosterService.deleteRosterById(this.data.id).subscribe({next:e=>{console.log(e),this.toastrService.success("Success","Schedule deleted"),this.data.getRostersByMonthAndYear()},error:e=>{console.error("Error updating roster:",e)}}),this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.so),t.Y36(f.WI),t.Y36(x.s),t.Y36(w._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["delete-schedule-dialog"]],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Confirm Delete"),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4,"Are you sure you want to delete this roster?"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return o.onNoClick()}),t._uU(7,"No"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return o.onConfirm()}),t._uU(9,"Yes"),t.qZA()())},dependencies:[f.uh,f.xY,f.H8,C.lW]}),n})();var ot=s(1061),nt=s(4274),at=s(7154),S=s(2200),M=s(4865),it=s(29),rt=s(1879);const st=["button"],lt=["*"],U=new t.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),P=new t.OlP("MatButtonToggleGroup"),ct={provide:l.JU,useExisting:(0,t.Gpc)(()=>q),multi:!0};let B=0;class J{constructor(i,e){this.source=i,this.value=e}}let q=(()=>{class n{constructor(e,o){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+B++,this.valueChange=new t.vpe,this.change=new t.vpe,this.appearance=o&&o.appearance?o.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(o=>{o.name=this._name,o._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,M.Ig)(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(o=>o.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,M.Ig)(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,M.Ig)(e),this._buttonToggles&&this._buttonToggles.forEach(o=>o._markForCheck())}ngOnInit(){this._selectionModel=new it.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,o=Array.isArray(e)?e[e.length-1]:e,a=new J(o,this.value);this._controlValueAccessorChangeFn(a.value),this.change.emit(a)}_syncButtonToggle(e,o,a=!1,r=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(e):this._selectionModel.deselect(e):r=!0,r?Promise.resolve().then(()=>this._updateModelValue(a)):this._updateModelValue(a)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>null!=e.value&&o===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(o=>this._selectValue(o))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const o=this._buttonToggles.find(a=>null!=a.value&&a.value===e);o&&(o.checked=!0,this._selectionModel.select(o))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(U,8))},n.\u0275dir=t.lG2({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,o,a){if(1&e&&t.Suo(a,F,5),2&e){let r;t.iGM(r=t.CRH())&&(o._buttonToggles=r)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,o){2&e&&(t.uIk("aria-disabled",o.disabled),t.ekj("mat-button-toggle-vertical",o.vertical)("mat-button-toggle-group-appearance-standard","standard"===o.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[t._Bn([ct,{provide:P,useExisting:n}])]}),n})();const dt=(0,_.Kr)(class{});let F=(()=>{class n extends dt{constructor(e,o,a,r,c,h){super(),this._changeDetectorRef=o,this._elementRef=a,this._focusMonitor=r,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new t.vpe;const p=Number(c);this.tabIndex=p||0===p?p:null,this.buttonToggleGroup=e,this.appearance=h&&h.appearance?h.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const o=(0,M.Ig)(e);o!==this._checked&&(this._checked=o,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=(0,M.Ig)(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+B++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new J(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P,8),t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(rt.tE),t.$8M("tabindex"),t.Y36(U,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(e,o){if(1&e&&t.Gf(st,5),2&e){let a;t.iGM(a=t.CRH())&&(o._buttonElement=a.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,o){1&e&&t.NdJ("focus",function(){return o.focus()}),2&e&&(t.uIk("aria-label",null)("aria-labelledby",null)("id",o.id)("name",null),t.ekj("mat-button-toggle-standalone",!o.buttonToggleGroup)("mat-button-toggle-checked",o.checked)("mat-button-toggle-disabled",o.disabled)("mat-button-toggle-appearance-standard","standard"===o.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[t.qOj],ngContentSelectors:lt,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,o){if(1&e&&(t.F$t(),t.TgZ(0,"button",0,1),t.NdJ("click",function(){return o._onButtonClick()}),t.TgZ(2,"span",2),t.Hsn(3),t.qZA()(),t._UZ(4,"span",3)(5,"span",4)),2&e){const a=t.MAs(1);t.Q6J("id",o.buttonId)("disabled",o.disabled||null),t.uIk("tabindex",o.disabled?-1:o.tabIndex)("aria-pressed",o.checked)("name",o.name||null)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),t.xp6(5),t.Q6J("matRippleTrigger",a)("matRippleDisabled",o.disableRipple||o.disabled)}},dependencies:[_.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.BQ,_.si,_.BQ]}),n})();function mt(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function gt(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.doctorProviderUuid),t.xp6(1),t.Oqu(e.name)}}function ht(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function pt(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDialogCreate())}),t._uU(1," +Add "),t.qZA()}}function _t(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Date"),t.qZA())}function bt(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.AsE(" ",e.date," (",o.getDayOfWeek(e.date),") ")}}function vt(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Doctor's Rosters"),t.qZA())}function Tt(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Doctor Name"),t.qZA())}function Ct(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.doctorName)}}function yt(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Start Time"),t.qZA())}function Mt(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.startTime)}}function xt(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"End Time"),t.qZA())}function Dt(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.endTime)}}function Zt(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Action"),t.qZA())}function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",25)(1,"div",31)(2,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw().$implicit,h=t.oxw(2);return t.KtG(h.openDialogEdit(c.date,r))}),t._uU(3," Edit "),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.openDialogDelete(r.id))}),t._uU(5," Delete "),t.qZA()()()}}function kt(n,i){if(1&n&&t._UZ(0,"tr",34),2&n){const e=t.oxw().index;t.ekj("hidden-header",0!==e)}}function Ot(n,i){1&n&&t._UZ(0,"tr",35)}function wt(n,i){if(1&n&&(t.TgZ(0,"td",25)(1,"table",17),t.ynx(2,26),t.YNc(3,Tt,2,0,"th",19),t.YNc(4,Ct,2,1,"td",20),t.BQk(),t.ynx(5,27),t.YNc(6,yt,2,0,"th",19),t.YNc(7,Mt,2,1,"td",20),t.BQk(),t.ynx(8,28),t.YNc(9,xt,2,0,"th",19),t.YNc(10,Dt,2,1,"td",20),t.BQk(),t.ynx(11,29),t.YNc(12,Zt,2,0,"th",19),t.YNc(13,At,6,0,"td",20),t.BQk(),t.YNc(14,kt,1,2,"tr",30),t.YNc(15,Ot,1,0,"tr",23),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("dataSource",e.doctors),t.xp6(13),t.Q6J("matHeaderRowDef",o.showColumn),t.xp6(1),t.Q6J("matRowDefColumns",o.showColumn)}}function St(n,i){1&n&&t._UZ(0,"tr",34)}function Nt(n,i){1&n&&t._UZ(0,"tr",35)}const E=function(){return["date","doctors"]};function Rt(n,i){if(1&n&&(t.TgZ(0,"div",16)(1,"table",17),t.ynx(2,18),t.YNc(3,_t,2,0,"th",19),t.YNc(4,bt,2,2,"td",20),t.BQk(),t.ynx(5,21),t.YNc(6,vt,2,0,"th",19),t.YNc(7,wt,16,3,"td",20),t.BQk(),t.YNc(8,St,1,0,"tr",22),t.YNc(9,Nt,1,0,"tr",23),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.rosters),t.xp6(7),t.Q6J("matHeaderRowDef",t.DdM(3,E)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,E))}}function Yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"mwl-calendar-month-view",36),t.NdJ("dayClicked",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleDateClick(a.day))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("viewDate",e.viewDate)("events",e.calendarEvents)}}let Ut=(()=>{class n{constructor(e,o,a,r,c){this.dialog=e,this.rolesService=o,this.supportService=a,this.rosterService=r,this.pageTitleService=c,this.conversations=[],this.defaultRosters=[],this.rosters=[],this.months=this.rosterService.months,this.years=[],this.departments=this.rosterService.departments,this.doctors=this.rosterService.doctors,this.selectedDayEvents=[],this.isAdmin=!1,this.showColumn=["name","startTime","endTime"],this.calendarEvents=[],this.viewMode="table"}ngOnChanges(e){e[this.rosterService.doctors]&&(this.doctors=this.rosterService.doctors)}ngOnInit(){this.rolesService.getRole("ORGANIZATIONAL: SYSTEM ADMINISTRATOR")&&(this.showColumn.push("action"),this.isAdmin=!0),this.pageTitleService.setTitle({title:"Rosters",imgUrl:"assets/svgs/menu-treatment-circle.svg"});const o=new Date;this.selectedMonth=this.months[o.getMonth()],this.selectedYear=o.getFullYear();const a=(new Date).getFullYear();for(let r=a-5;r<=a+5;r++)this.years.push(r);this.getRostersByMonthAndYear()}getRostersByMonthAndYear(){const e=this.months.indexOf(this.selectedMonth)+1,o=this.selectedYear;this.viewDate=new Date(this.selectedYear,this.months.indexOf(this.selectedMonth),1),this.rosterService.getRostersByMonth(e,o).subscribe({next:a=>{a.data?(this.rosters=a.data,this.defaultRosters=a.data,this.transformRostersToCalendarEvents()):(this.rosters=[],this.calendarEvents=[])},error:a=>{this.rosters=[],this.calendarEvents=[],console.error("Error fetching rosters:",a)}})}handleDateClick({date:e}){this.selectedDayEvents=this.calendarEvents.filter(o=>o.start.getFullYear()===e.getFullYear()&&o.start.getMonth()===e.getMonth()&&o.start.getDate()===e.getDate())}transformRostersToCalendarEvents(){const e=[];this.rosters.forEach(o=>{o.doctors.forEach(a=>{const r={start:new Date(o.date+" "+a.startTime),end:new Date(o.date+" "+a.endTime),title:`${a.doctorName} (${a.startTime} - ${a.endTime})`};e.push(r)})}),this.calendarEvents=[...e]}getDayOfWeek(e){const o=new Date(e);return this.rosterService.days[o.getDay()]||"unknown"}onMonthChange(e){this.selectedMonth=e.value,this.getRostersByMonthAndYear()}onYearChange(e){this.selectedYear=e.value,this.getRostersByMonthAndYear()}openDialogCreate(){this.dialog.open(z,{data:{type:"create",getRostersByMonthAndYear:()=>this.getRostersByMonthAndYear()}})}openDialogEdit(e,o){this.dialog.open(tt,{data:{id:o.id,department:o.department,doctorName:o.doctorName,date:e,startTime:o.startTime,endTime:o.endTime,doctorProviderUuid:o.doctorProviderUuid,getRostersByMonthAndYear:()=>this.getRostersByMonthAndYear()}})}onDepartmentChange(e){this.doctors=this.rosterService.filterDoctorListByDepartment(e)}onDoctorChange(e){let o="all"===e?this.defaultRosters:this.rosters.map(a=>({...a,doctors:a.doctors.filter(r=>r.doctorProviderUuid===e)}));o=o.filter(a=>a.doctors.length>0),this.rosters=o}openDialogDelete(e){this.dialog.open(et,{data:{id:e,getRostersByMonthAndYear:()=>this.getRostersByMonthAndYear()}})}toggleView(){this.viewMode="table"===this.viewMode?"calendar":"table"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.uw),t.Y36(ot.cM),t.Y36(nt.a),t.Y36(x.s),t.Y36(at.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-roster"]],features:[t.TTD],decls:34,vars:10,consts:[[1,"container-fluid"],[1,"controls"],[1,"title"],["name","viewMode","aria-label","View Mode",1,"toggle-button",3,"value","change"],["value","table"],["value","calendar"],["appearance","outline"],["formControlName","department",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","doctor",3,"selectionChange"],["value","all"],[3,"value","valueChange","selectionChange"],["mat-raised-button","","color","primary","style","height: 50px; width: 40px; margin-top: 2px",3,"click",4,"ngIf"],["class","mat-elevation-z8",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",2,"height","50px","width","40px","margin-top","2px",3,"click"],[1,"mat-elevation-z8"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","doctors"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matColumnDef","name"],["matColumnDef","startTime"],["matColumnDef","endTime"],["matColumnDef","action"],["mat-header-row","",3,"hidden-header",4,"matHeaderRowDef"],[2,"display","flex","flex-wrap","wrap","gap","10px","justify-content","center"],["mat-raised-button","","color","primary",2,"flex","1 1 100px","min-width","100px","min-height","40px",3,"click"],["mat-raised-button","","color","warn",2,"flex","1 1 100px","min-width","100px","min-height","40px",3,"click"],["mat-header-row",""],["mat-row",""],[3,"viewDate","events","dayClicked"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Roster List"),t.qZA(),t.TgZ(4,"mat-button-toggle-group",3),t.NdJ("change",function(){return o.toggleView()}),t.TgZ(5,"mat-button-toggle",4),t._uU(6,"Table"),t.qZA(),t.TgZ(7,"mat-button-toggle",5),t._uU(8,"Calendar"),t.qZA()(),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Department"),t.qZA(),t.TgZ(12,"mat-select",7),t.NdJ("selectionChange",function(r){return o.onDepartmentChange(r.value)}),t.YNc(13,mt,2,2,"mat-option",8),t.qZA()(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Doctor"),t.qZA(),t.TgZ(17,"mat-select",9),t.NdJ("selectionChange",function(r){return o.onDoctorChange(r.value)}),t.TgZ(18,"mat-option",10),t._uU(19,"All"),t.qZA(),t.YNc(20,gt,2,2,"mat-option",8),t.qZA()(),t.TgZ(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"Month"),t.qZA(),t.TgZ(24,"mat-select",11),t.NdJ("valueChange",function(r){return o.selectedMonth=r})("selectionChange",function(r){return o.onMonthChange(r)}),t.YNc(25,ht,2,2,"mat-option",8),t.qZA()(),t.TgZ(26,"mat-form-field",6)(27,"mat-label"),t._uU(28,"Year"),t.qZA(),t.TgZ(29,"mat-select",11),t.NdJ("valueChange",function(r){return o.selectedYear=r})("selectionChange",function(r){return o.onYearChange(r)}),t.YNc(30,pt,2,2,"mat-option",8),t.qZA()(),t.YNc(31,ft,2,0,"button",12),t.qZA(),t.YNc(32,Rt,10,5,"div",13),t.YNc(33,Yt,2,2,"div",13),t.qZA()),2&e&&(t.xp6(4),t.Q6J("value",o.viewMode),t.xp6(9),t.Q6J("ngForOf",o.departments),t.xp6(7),t.Q6J("ngForOf",o.doctors),t.xp6(4),t.Q6J("value",o.selectedMonth),t.xp6(1),t.Q6J("ngForOf",o.months),t.xp6(4),t.Q6J("value",o.selectedYear),t.xp6(1),t.Q6J("ngForOf",o.years),t.xp6(1),t.Q6J("ngIf",o.isAdmin),t.xp6(1),t.Q6J("ngIf","table"===o.viewMode),t.xp6(1),t.Q6J("ngIf","calendar"===o.viewMode))},dependencies:[S.GH,q,F,v.KE,v.hX,D.gD,_.ey,l.JJ,l.u,y.sg,y.O5,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,C.lW],styles:[".mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:none;width:100%;overflow-x:auto}.container-fluid[_ngcontent-%COMP%]{box-shadow:0 4px 24px #1f1c3a14;padding:10px;border-radius:10px}.action-btn.bg-blue[_ngcontent-%COMP%]{background:var(--color-lightGray)!important}.hidden-header[_ngcontent-%COMP%]{display:none}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-start;gap:20px;margin-bottom:20px}.mat-form-field[_ngcontent-%COMP%]{width:150px}.calendar-event[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;padding:5px;border-radius:4px}.title[_ngcontent-%COMP%]{margin-left:5px;margin-top:20px;margin-right:auto;font-size:24px;font-weight:600}.toggle-button[_ngcontent-%COMP%]{margin-top:5px;height:51px}table.mat-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}table.mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), table.mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:130px}table.mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+2), table.mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+2){width:80px}table.mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;text-align:left;font-weight:700}table.mat-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f9f9f9}.actions-btn-wrap[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:white;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap[_ngcontent-%COMP%]   .blue-btn[_ngcontent-%COMP%]{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap[_ngcontent-%COMP%]   .pink-btn[_ngcontent-%COMP%]{background:var(--color-lightPink);color:var(--color-red)}.intel-accordion-con[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex}.input-group[_ngcontent-%COMP%]{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:none;border:none;cursor:default}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.title[_ngcontent-%COMP%]{margin-right:auto}.button-group[_ngcontent-%COMP%]{display:flex}.btn-filled[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.btn-line[_ngcontent-%COMP%]{background-color:transparent;color:#007bff;border:1px solid #007BFF}@media (max-width: 768px){.input-group[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:10px 0}.intel-accordion-con[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{height:fit-content}.controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.mat-form-field[_ngcontent-%COMP%]{width:100%}.intel-accordion-con[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:fit-content}}"]}),n})();var Pt=s(8238),Bt=s(8558),Jt=s(9646),qt=s(529);const Ft=[{path:"",component:Ut}];function Et(n){return new H.w(n,"./assets/i18n/",".json")}let Qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[R.Bz.forChild(Ft),S._8.forRoot({provide:S._A,useFactory:Jt.x}),ut,_.XK,D.LD,Bt.rP,f.Is,Y.p9,Z.FA,l.UX,y.ez,O.c,Pt.N6,v.lN,Q.To,g.p0,I.AV,G.Ps,C.ot,qt.JF,R.Bz]}),n})()}}]);